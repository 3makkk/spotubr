<!--popup.html-->
<script>
    function decodeQueryString(queryString) {
        const pairs = queryString.split('&');
        const result = {};
        pairs.forEach(function (pair) {
            pair = pair.split('=');
            result[pair[0]] = decodeURIComponent(pair[1] || '');
        });

        return result;
    }

    const hash = window.location.hash.substr(1);
    const authData = decodeQueryString(hash);
    window.opener.postMessage(authData, '*');
</script>